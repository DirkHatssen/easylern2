<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EasyLern.de</title>

<style>
    body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: #f5f6f7;
        color: #333;
    }

    /* HEADER */
    header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 30px;
        background: white;
        border-bottom: 1px solid #e0e0e0;
        position: sticky;
        top: 0;
        z-index: 10;
    }

    header img {
        height: 45px;
    }

    nav a {
        margin-left: 20px;
        text-decoration: none;
        font-weight: 500;
        color: #333;
        transition: 0.2s;
    }
    nav a.active {
        color: #007aff;
    }

    /* SUCHBEREICH */
    #searchArea {
        max-width: 1100px;
        margin: 20px auto;
        padding: 0 20px;
        display: flex;
        gap: 10px;
    }

    #searchInput {
        flex: 1;
        padding: 12px 15px;
        border-radius: 12px;
        border: 1px solid #ccc;
        font-size: 16px;
        background: white;
    }

    #categoryFilter {
        padding: 12px 14px;
        border-radius: 12px;
        border: 1px solid #cfcfcf;
        background: #ffffff;
        font-size: 15px;
        cursor: pointer;
        transition: all 0.25s ease;
    }

    #categoryFilter:hover {
        border-color: #007aff;
        box-shadow: 0 0 4px rgba(0,122,255,0.3);
    }

    /* GRID */
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill,minmax(270px,1fr));
        gap: 20px;
        padding: 20px;
        max-width: 1200px;
        margin: auto;
    }

    .card {
        background: white;
        border-radius: 16px;
        padding: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.07);
        cursor: pointer;
        transition: transform 0.15s, box-shadow 0.15s;
    }
    .card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 16px rgba(0,0,0,0.09);
    }

    .thumb video {
        width: 100%;
        border-radius: 12px;
    }

    /* TABS */
    .tabs {
        display: flex;
        gap: 10px;
        margin: 20px 0;
    }
    .tab-btn {
        padding: 10px 20px;
        border-radius: 10px;
        border: none;
        background: #eaeaea;
        cursor: pointer;
        font-weight: 600;
    }
    .tab-btn.active {
        background: #007aff;
        color: white;
    }

    /* GALLERY */
    .gallery img {
        width: 160px;
        border-radius: 10px;
        margin: 6px;
        cursor: pointer;
    }

    /* MODAL */
    #imgModal {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.7);
        display: none;
        place-items: center;
    }
    #imgModal.open {
        display: grid;
    }
    #modalImg {
        max-width: 80%;
        border-radius: 12px;
    }
    #closeModal {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 35px;
        cursor: pointer;
        color: white;
    }

    #imgDownload {
        position: absolute;
        top: 20px;
        left: 20px;
        background: white;
        padding: 6px 12px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
    }

    footer {
        background: white;
        text-align: center;
        padding: 20px;
        border-top: 1px solid #ddd;
        margin-top: 40px;
    }
</style>
</head>

<body>

<header>
    <img src="images/logo.png" alt="Logo">
    <nav>
        <a href="#" id="navHome">Startseite</a>
        <a href="#" id="navAbout">√úber uns</a>
        <a href="#" id="navContact">Kontakt</a>
    </nav>
</header>

<!-- Suchfeld + Kategorie -->
<div id="searchArea">
    <input list="search-suggestions" id="searchInput" placeholder="Suche nach Videos, Themen oder Stichworten ‚Ä¶">
    <datalist id="search-suggestions"></datalist>

    <select id="categoryFilter">
        <option value="">Alle Kategorien</option>
        <option value="javascript">JavaScript</option>
        <option value="css">CSS</option>
        <option value="python">Python</option>
    </select>
</div>

<div id="content"></div>

<!-- MODAL -->
<div id="imgModal">
    <span id="closeModal">√ó</span>
    <a id="imgDownload" download>Download</a>
    <img id="modalImg">
</div>

<footer>
    ¬© 2025 EasyLern.de ‚Äì Programmieren einfach lernen!
</footer>

<!-- =============================== -->
<!--        JAVASCRIPT BEREICH       -->
<!-- =============================== -->
<script>
/* FAVORITEN */
let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

/* VIDEOS */
const VIDEOS = [
    {
        id: 'v1',
        title: 'JavaScript Grundlagen',
        description: 'Einsteigerfreundliches Tutorial ‚Ä¶',
        video: 'videos/js-basics.mp4',
        thumbs: 'images/js-thumb.jpg',
        images: ['images/js-1.jpg', 'images/js-2.jpg'],
        tags: ['javascript', 'einsteiger']
    },
    {
        id: 'v2',
        title: 'CSS Grid Layout',
        description: 'Moderne Layouts mit CSS Grid ‚Ä¶',
        video: 'videos/css-grid.mp4',
        thumbs: 'images/grid-thumb.jpg',
        images: ['images/grid-1.jpg', 'images/grid-2.jpg'],
        tags: ['css', 'layout', 'grid']
    },
    {
        id: 'v3',
        title: 'Python Backend Basics',
        description: 'Flask Intro, Routes, Deployment ‚Ä¶',
        video: 'videos/python-flask.mp4',
        thumbs: 'images/python-thumb.jpg',
        images: ['images/py-1.jpg', 'images/py-2.jpg'],
        tags: ['python', 'backend']
    }
];

const $ = sel => document.querySelector(sel);
const content = $('#content');
const searchInput = $('#searchInput');

/* Suchvorschl√§ge */
function buildSuggestions() {
    let set = new Set();
    VIDEOS.forEach(v => {
        set.add(v.title);
        v.tags.forEach(t => set.add(t));
    });
    $('#search-suggestions').innerHTML =
        [...set].map(s => `<option value="${s}"></option>`).join("");
}
buildSuggestions();

/* Suche */
function searchVideos(q) {
    const words = q.toLowerCase().split(/\s+/).filter(Boolean);
    if (!words.length) return VIDEOS.slice();
    return VIDEOS.filter(v => {
        const hay = (v.title + " " + v.description + " " + v.tags.join(" ")).toLowerCase();
        return words.every(w => hay.includes(w));
    });
}

/* Startseite anzeigen */
function renderHome(filterQuery = "") {
    let results = searchVideos(filterQuery);

    const cat = $('#categoryFilter').value;
    if (cat) results = results.filter(v => v.tags.includes(cat));

    let html = `
<div class="grid">
`;

    if (results.length === 0) {
        html += `
      <div style="grid-column:1/-1;text-align:center;font-size:20px;padding:40px;">
        Wir konnten zu deinem Suchbegriff leider nichts Passendes finden.<br><br>

        <button onclick="location.reload()" 
            style="
                padding:10px 22px;
                border-radius:12px;
                border:none;
                background:#007aff;
                color:white;
                font-size:16px;
                cursor:pointer;
                box-shadow:0 3px 10px rgba(0,122,255,0.3);
            ">
            Seite neu laden
        </button>
      </div>
        `;
    } else {
        results.forEach(v => {
            const fav = favorites.includes(v.id) ? "‚ù§Ô∏è" : "ü§ç";
            html += `
        <article class="card" data-id="${v.id}">
          <div class="thumb"><video muted preload="metadata" src="${v.video}"></video></div>
          <div class="meta">
            <h3>${v.title} 
              <span class="fav-btn" data-id="${v.id}" style="cursor:pointer">${fav}</span>
            </h3>
            <p>${v.description}</p>
          </div>
        </article>
      `;
        });
    }

    html += `</div>`;
    content.innerHTML = html;

    document.querySelectorAll('.card').forEach(c => {
        c.addEventListener('click', e => {
            if (e.target.classList.contains('fav-btn')) return;
            location.hash = "#/video?id=" + c.dataset.id;
        });
    });

    document.querySelectorAll('.fav-btn').forEach(btn => {
        btn.addEventListener('click', e => {
            e.stopPropagation();
            const id = btn.dataset.id;
            if (favorites.includes(id)) favorites = favorites.filter(x => x !== id);
            else favorites.push(id);
            localStorage.setItem("favorites", JSON.stringify(favorites));
            renderHome(filterQuery);
        });
    });
}

/* Video-Seite */
function renderVideoPage(id, tab = 'video') {
    const v = VIDEOS.find(x => x.id === id);
    if (!v) { content.innerHTML = "Video nicht gefunden"; return; }

    let html = `
<div class="video-page">
  <h2>${v.title}</h2>

  <div class="tabs">
    <button class="tab-btn ${tab === 'video' ? 'active' : ''}" data-tab="video">Video</button>
    <button class="tab-btn ${tab === 'bilder' ? 'active' : ''}" data-tab="bilder">Bilder</button>
  </div>

  <div class="video-holder">
`;

    if (tab === "video") {
        html += `<video controls src="${v.video}" style="width:100%;border-radius:10px"></video>`;
    } else {
        html += `<div class="gallery">`;
        v.images.forEach(img => html += `<img src="${img}">`);
        html += `</div>`;
    }

    html += `
  </div>

  <div style="background:white;padding:15px;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,0.06);margin-top:20px;">
    ${v.description}
  </div>
</div>
`;

    content.innerHTML = html;

    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            renderVideoPage(id, btn.dataset.tab);
        });
    });

    document.querySelectorAll('.gallery img').forEach(img => {
        img.addEventListener('click', () => openModal(img.src));
    });
}

/* Modal */
const modal = $('#imgModal');
const modalImg = $('#modalImg');
const imgDownload = $('#imgDownload');

function openModal(src) {
    modalImg.src = src;
    imgDownload.href = src;
    modal.classList.add("open");
}
$('#closeModal').addEventListener('click', () => modal.classList.remove('open'));
modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('open') });

/* Routing */
function handleHash() {
    const h = location.hash;
    if (h.startsWith("#/video")) {
        const params = new URLSearchParams(h.split("?")[1]);
        renderVideoPage(params.get("id"), params.get("tab") || "video");
    } else renderHome(searchInput.value.trim());
}
window.addEventListener("hashchange", handleHash);
handleHash();

/* Enter-Suche */
searchInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') {
        e.preventDefault();
        renderHome(searchInput.value.trim());
    }
});

/* Wenn Suchfeld geleert ‚Üí alles anzeigen */
searchInput.addEventListener("input", () => {
    if (searchInput.value.trim() === "") {
        renderHome("");
    }
});

/* Kategorie-Filter */
$('#categoryFilter').addEventListener('change', () => renderHome(searchInput.value.trim()));

</script>
</body>
</html>
